---
/**
 * Landing page — standalone Astro page, outside Starlight.
 *
 * The Three.js canvas lives as a direct child of <body>, below the
 * page wrapper in z-index.  No stacking-context prison.
 *
 * Design: dark-first SaaS pillar page (Linear / Vercel aesthetic).
 * Sections are short teasers that link into the Starlight docs.
 */
import '@fontsource/geist-sans/400.css';
import '@fontsource/geist-sans/500.css';
import '@fontsource/geist-sans/600.css';
import '@fontsource/geist-sans/700.css';
import '@fontsource/geist-sans/800.css';
import '@fontsource/geist-mono/400.css';
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Communitas — Building intelligent communities</title>
    <meta
      name="description"
      content="Network science and open-source AI tools for community builders. Research, agents, and guidance for intentional community design."
    />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="sitemap" href="/sitemap-index.xml" />
    <meta property="og:title" content="Communitas — Building intelligent communities" />
    <meta
      property="og:description"
      content="Network science and open-source AI tools for community builders."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://communitas.xyz" />
  </head>

  <body>
    <!-- Three.js canvas: fixed behind everything, z-index: 0 -->
    <div
      id="network-scene"
      aria-hidden="true"
      role="img"
      aria-label="Animated network graph showing community clusters connected by bridge nodes"
    >
      <noscript>
        <p class="noscript-msg">Interactive network visualization requires JavaScript.</p>
      </noscript>
    </div>

    <!-- Page content: above the canvas -->
    <div class="page">
      <!-- ─── Nav ─── -->
      <header class="nav">
        <div class="nav-inner">
          <a href="/" class="nav-title" aria-label="Communitas home">
            <svg
              width="20"
              height="20"
              viewBox="0 0 32 32"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              aria-hidden="true"
            >
              <circle cx="8" cy="16" r="3" fill="currentColor" />
              <circle cx="24" cy="10" r="3" fill="currentColor" />
              <circle cx="24" cy="22" r="3" fill="currentColor" />
              <line
                x1="10.5"
                y1="15"
                x2="21.5"
                y2="10.5"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
              />
              <line
                x1="10.5"
                y1="17"
                x2="21.5"
                y2="21.5"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
              />
            </svg>
            Communitas
          </a>

          <nav class="nav-links" aria-label="Primary">
            <a href="/overview/what-is-communitas/">Docs</a>
            <a href="https://github.com/communitas-xyz" rel="noopener noreferrer">GitHub</a>
          </nav>
        </div>
      </header>

      <!-- ─── Hero ─── -->
      <section class="hero">
        <div class="container">
          <p class="hero-kicker">Research platform &amp; open-source toolkit</p>
          <h1 class="hero-title">Building intelligent communities.</h1>
          <p class="hero-sub">
            There is an entire science of how communities form, fragment, and thrive.
            Communitas brings that science to the people who need it most — community builders.
          </p>
          <div class="hero-actions">
            <a
              href="https://github.com/communitas-xyz"
              class="btn btn-primary"
              rel="noopener noreferrer">Get the agent</a
            >
            <a href="#why" class="btn btn-ghost">Why this matters</a>
          </div>
        </div>
      </section>

      <!-- ─── Why this matters ─── -->
      <section class="section" id="why">
        <div class="container">
          <p class="section-kicker">The problem</p>
          <h2 class="section-title">The tools exist. You just can't reach them.</h2>
          <p class="section-body">
            Enterprise teams have had network analysis, community detection, and engagement
            tooling for years. They map organizational networks, model information flow, and
            identify structural risks — because the research works and the tools are powerful.
          </p>
          <p class="section-body">
            Meanwhile, the people actually building communities — Discord moderators, open-source
            maintainers, civic organizers, online community managers — navigate by instinct.
            They solve network problems every day without network tools, because nobody has made
            the science accessible.
          </p>
          <p class="section-body">
            And the need has never been greater. Social capital is declining. People are lonelier
            and more isolated. Social platforms optimized for engagement, not connection. AI floods
            networks with synthetic content. The technology that could help communities is the same
            technology making genuine human connection harder to find.
          </p>
          <a href="/overview/why-communities/" class="section-link">
            Why communities matter
            <span aria-hidden="true">&rarr;</span>
          </a>
        </div>
      </section>

      <!-- ─── Four moves ─── -->
      <section class="section section-alt">
        <div class="container">
          <p class="section-kicker">The approach</p>
          <h2 class="section-title">Four moves</h2>
          <p class="section-body">
            Community work decomposes into four activities. Most builders already do them by
            instinct. Communitas makes each one measurable and improvable.
          </p>
          <div class="grid-4">
            <div class="card">
              <h3 class="card-title">Understand</h3>
              <p class="card-body">
                Map your community's real interaction patterns. Who connects to whom, where
                information flows, where it gets stuck.
              </p>
              <a href="/models/community-graph/" class="card-link">Community graph &rarr;</a>
            </div>
            <div class="card">
              <h3 class="card-title">Spot</h3>
              <p class="card-body">
                Detect structural problems early: clusters drifting apart, newcomers vanishing,
                unsustainable load on a few key people.
              </p>
              <a href="/models/health-metrics/" class="card-link">Health metrics &rarr;</a>
            </div>
            <div class="card">
              <h3 class="card-title">Try</h3>
              <p class="card-body">
                Take specific, low-risk actions grounded in research. Introductions, onboarding
                paths, facilitation prompts — transparent and human-approved.
              </p>
              <a href="/models/intervention-taxonomy/" class="card-link">Interventions &rarr;</a>
            </div>
            <div class="card">
              <h3 class="card-title">Learn</h3>
              <p class="card-body">
                Treat each action as a small experiment. Track what changed. Update your playbooks
                based on evidence, not assumptions.
              </p>
              <a href="/experiments/experiment-registry/" class="card-link">Experiments &rarr;</a>
            </div>
          </div>
        </div>
      </section>

      <!-- ─── What you get ─── -->
      <section class="section">
        <div class="container">
          <p class="section-kicker">What you get</p>
          <h2 class="section-title">Learn, diagnose, improve</h2>
          <div class="grid-3">
            <div class="card">
              <h3 class="card-title">Research platform</h3>
              <p class="card-body">
                Community science made accessible. Network theory, health metrics, intervention
                patterns, and governance models — distilled from the literature into guidance
                you can act on.
              </p>
              <a href="/research/foundations/" class="card-link">Research foundations &rarr;</a>
            </div>
            <div class="card">
              <h3 class="card-title">Open-source agent</h3>
              <p class="card-body">
                A community anthropologist trained on network science. Ask it questions, build
                a local graph of your community, and get research-backed guidance on
                structure and health.
              </p>
              <a
                href="https://github.com/communitas-xyz"
                class="card-link"
                rel="noopener noreferrer">View on GitHub &rarr;</a
              >
            </div>
            <div class="card">
              <h3 class="card-title">Concierge agent</h3>
              <p class="card-body card-body-muted">
                An active guide that helps onboard new members, foster connections, and
                support community growth over time. Transparent, opt-in, and human-supervised.
              </p>
              <span class="card-status">Coming soon</span>
            </div>
          </div>
        </div>
      </section>

      <!-- ─── Why "Communitas" ─── -->
      <section class="section section-alt">
        <div class="container">
          <p class="section-kicker">The name</p>
          <h2 class="section-title">Why Communitas</h2>
          <p class="section-body">
            The anthropologist Victor Turner coined <em>communitas</em> to describe
            a&nbsp;state of intense social togetherness — the feeling that emerges when people
            step outside ordinary hierarchies and connect as equals. Turner was writing about
            cities and physical gathering places.
          </p>
          <p class="section-body">
            We are taking that idea into the digital world. Online communities deserve the same
            intentional design that the best physical communities have always required.
            The&nbsp;science exists. The tools can be built. The question is whether we choose
            to be deliberate about the spaces where people actually spend their lives.
          </p>
          <a href="/overview/what-is-communitas/" class="section-link">
            What is Communitas
            <span aria-hidden="true">&rarr;</span>
          </a>
        </div>
      </section>

      <!-- ─── Audience ─── -->
      <section class="section">
        <div class="container">
          <p class="section-kicker">Two paths</p>
          <h2 class="section-title">Whether you're growing or starting</h2>
          <div class="grid-2">
            <div class="audience-item">
              <h3 class="card-title">You manage an active community</h3>
              <p class="card-body">
                You have a Discord server, a Slack workspace, a forum, an open-source project.
                People are already there — but you can't see the structure. Who bridges your
                clusters? Where do newcomers drop off? Which three people carry everything?
                Connect the agent, map your network, and see what's really happening.
              </p>
            </div>
            <div class="audience-item">
              <h3 class="card-title">You want to build a community</h3>
              <p class="card-body">
                You have an idea and an audience, but you haven't built the space yet.
                Start with the research — learn how communities form, what makes them healthy,
                and how to design for real connection from day one. The principles come first.
                The tools follow.
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- ─── CTA ─── -->
      <section class="section section-cta">
        <div class="container">
          <h2 class="section-title">Start being intentional</h2>
          <p class="section-body">
            The science of community health is real, it's accessible, and it's open. Read the
            research. Try the agent. Build something worth gathering around.
          </p>
          <div class="hero-actions">
            <a
              href="https://github.com/communitas-xyz"
              class="btn btn-primary"
              rel="noopener noreferrer">Get the agent</a
            >
            <a href="/overview/what-is-communitas/" class="btn btn-ghost">Read the research</a>
          </div>
        </div>
      </section>

      <!-- ─── Footer ─── -->
      <footer class="footer">
        <div class="container footer-inner">
          <p>&copy; 2026 Communitas. Open research, open tools.</p>
          <nav class="footer-links" aria-label="Footer">
            <a href="/overview/what-is-communitas/">Docs</a>
            <a href="/governance/governance-and-safety-principles/">Governance</a>
            <a href="https://github.com/communitas-xyz" rel="noopener noreferrer">GitHub</a>
          </nav>
        </div>
      </footer>
    </div>

    <!-- ─── Theme persistence ─── -->
    <script is:inline>
      // Read the same localStorage key as starlight-theme-black
      (function () {
        const stored = localStorage.getItem('starlight-theme');
        const theme =
          stored === 'light' || stored === 'dark'
            ? stored
            : window.matchMedia('(prefers-color-scheme: light)').matches
              ? 'light'
              : 'dark';
        document.documentElement.setAttribute('data-theme', theme);
      })();
    </script>

    <!-- ─── Three.js canvas init ─── -->
    <script>
      import { init } from '../scripts/network-scene';

      function setup() {
        const container = document.getElementById('network-scene');
        if (!container) return;
        if (container.querySelector('canvas')) return;

        const observer = new IntersectionObserver(
          (entries) => {
            if (entries[0].isIntersecting) {
              init(container);
              observer.disconnect();
            }
          },
          { threshold: 0.05 },
        );
        observer.observe(container);
      }

      setup();
    </script>
  </body>
</html>

<style is:global>
  /* ------------------------------------------------------------------ */
  /* Design tokens — match starlight-theme-black                         */
  /* ------------------------------------------------------------------ */

  :root {
    --font-sans: 'Geist Sans', ui-sans-serif, system-ui, -apple-system, sans-serif;
    --font-mono: 'Geist Mono', ui-monospace, monospace;
    --radius: 0.5rem;
  }

  [data-theme='dark'] {
    --background: oklch(0.145 0 0);
    --foreground: oklch(0.985 0 0);
    --muted: oklch(0.269 0 0);
    --muted-fg: oklch(0.708 0 0);
    --body-fg: oklch(0.82 0 0);
    --border: oklch(1 0 0 / 10%);
    --primary: oklch(0.922 0 0);
    --accent: #818cf8;
    --accent-dim: #6366f1;
  }

  [data-theme='light'] {
    --background: oklch(1 0 0);
    --foreground: oklch(0.145 0 0);
    --muted: oklch(0.968 0 0);
    --muted-fg: oklch(0.556 0 0);
    --body-fg: oklch(0.35 0 0);
    --border: oklch(0.922 0 0);
    --primary: oklch(0.205 0 0);
    --accent: #6366f1;
    --accent-dim: #4f46e5;
  }

  /* ------------------------------------------------------------------ */
  /* Reset & base                                                        */
  /* ------------------------------------------------------------------ */

  *,
  *::before,
  *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    scroll-behavior: smooth;
  }

  body {
    font-family: var(--font-sans);
    background-color: var(--background);
    color: var(--foreground);
    line-height: 1.6;
    min-height: 100svh;
    overflow-x: hidden;
  }

  a {
    color: inherit;
    text-decoration: none;
  }

  /* ------------------------------------------------------------------ */
  /* Canvas layer                                                        */
  /* ------------------------------------------------------------------ */

  #network-scene {
    position: fixed;
    inset: 0;
    z-index: 0;
    pointer-events: none;
    opacity: 0.4;
    transition: opacity 0.05s linear;
  }

  #network-scene canvas {
    display: block;
    width: 100%;
    height: 100%;
  }

  .noscript-msg {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: var(--muted-fg);
    font-size: 0.875rem;
  }

  /* ------------------------------------------------------------------ */
  /* Page wrapper — above the canvas                                     */
  /* ------------------------------------------------------------------ */

  .page {
    position: relative;
    z-index: 1;
  }

  /* ------------------------------------------------------------------ */
  /* Container                                                           */
  /* ------------------------------------------------------------------ */

  .container {
    width: 100%;
    max-width: 64rem;
    margin: 0 auto;
    padding: 0 1.5rem;
  }

  @media (min-width: 768px) {
    .container {
      padding: 0 2rem;
    }
  }

  /* ------------------------------------------------------------------ */
  /* Nav                                                                 */
  /* ------------------------------------------------------------------ */

  .nav {
    position: sticky;
    top: 0;
    z-index: 50;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--border);
  }

  [data-theme='dark'] .nav {
    background: oklch(0.145 0 0 / 70%);
  }

  [data-theme='light'] .nav {
    background: oklch(1 0 0 / 70%);
  }

  .nav-inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: 64rem;
    margin: 0 auto;
    padding: 0 1.5rem;
    height: 3.5rem;
  }

  .nav-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9375rem;
    font-weight: 600;
    letter-spacing: -0.01em;
    color: var(--foreground);
  }

  .nav-title svg {
    color: var(--accent);
  }

  .nav-links {
    display: flex;
    gap: 1.5rem;
    font-size: 0.875rem;
    font-weight: 400;
    color: var(--muted-fg);
  }

  .nav-links a:hover {
    color: var(--foreground);
  }

  /* ------------------------------------------------------------------ */
  /* Hero                                                                */
  /* ------------------------------------------------------------------ */

  .hero {
    display: flex;
    align-items: center;
    min-height: calc(100svh - 3.5rem);
    padding: 4rem 0;
    text-align: center;
  }

  .hero .container {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .hero-kicker {
    font-size: 0.8125rem;
    font-weight: 500;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    color: var(--accent);
    margin-bottom: 1.25rem;
  }

  .hero-title {
    font-size: clamp(2.25rem, 5vw + 1rem, 3.75rem);
    font-weight: 800;
    letter-spacing: -0.04em;
    line-height: 1.1;
    max-width: 44rem;
    margin-bottom: 1.25rem;
  }

  .hero-sub {
    font-size: clamp(1rem, 1.5vw + 0.5rem, 1.25rem);
    font-weight: 400;
    color: var(--body-fg);
    max-width: 36rem;
    line-height: 1.6;
    margin-bottom: 2.5rem;
  }

  /* ------------------------------------------------------------------ */
  /* Buttons                                                             */
  /* ------------------------------------------------------------------ */

  .hero-actions {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
    justify-content: center;
  }

  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.625rem 1.375rem;
    border-radius: var(--radius);
    font-size: 0.875rem;
    font-weight: 500;
    font-family: var(--font-sans);
    cursor: pointer;
    transition:
      background-color 0.15s,
      color 0.15s,
      border-color 0.15s;
    border: 1px solid transparent;
  }

  .btn-primary {
    background: var(--foreground);
    color: var(--background);
  }

  .btn-primary:hover {
    opacity: 0.88;
  }

  .btn-ghost {
    border-color: var(--border);
    color: var(--muted-fg);
    background: transparent;
  }

  .btn-ghost:hover {
    color: var(--foreground);
    border-color: var(--muted-fg);
  }

  /* ------------------------------------------------------------------ */
  /* Sections                                                            */
  /* ------------------------------------------------------------------ */

  .section {
    padding: 5rem 0;
    border-top: 1px solid var(--border);
  }

  /* Alternating section: slightly different background for rhythm */
  .section-alt {
    background: var(--muted);
  }

  .section-kicker {
    font-size: 0.8125rem;
    font-weight: 500;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    color: var(--accent);
    margin-bottom: 0.75rem;
  }

  .section-title {
    font-size: clamp(1.5rem, 3vw + 0.5rem, 2.25rem);
    font-weight: 700;
    letter-spacing: -0.03em;
    line-height: 1.2;
    margin-bottom: 1rem;
  }

  .section-body {
    font-size: 1rem;
    color: var(--body-fg);
    max-width: 42rem;
    line-height: 1.75;
    margin-bottom: 1rem;
  }

  .section-body:last-of-type {
    margin-bottom: 1.5rem;
  }

  .section-link {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    font-size: 0.9375rem;
    font-weight: 500;
    color: var(--accent);
    margin-top: 0.5rem;
  }

  .section-link:hover {
    text-decoration: underline;
    text-underline-offset: 3px;
  }

  /* ------------------------------------------------------------------ */
  /* CTA section                                                         */
  /* ------------------------------------------------------------------ */

  .section-cta {
    text-align: center;
    padding: 6rem 0;
  }

  .section-cta .section-body {
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 2rem;
  }

  /* ------------------------------------------------------------------ */
  /* Grids                                                               */
  /* ------------------------------------------------------------------ */

  .grid-2,
  .grid-3,
  .grid-4 {
    display: grid;
    gap: 1.25rem;
    margin-top: 2rem;
  }

  .grid-2 {
    grid-template-columns: 1fr;
  }
  .grid-3 {
    grid-template-columns: 1fr;
  }
  .grid-4 {
    grid-template-columns: 1fr;
  }

  @media (min-width: 640px) {
    .grid-2 {
      grid-template-columns: repeat(2, 1fr);
    }
    .grid-3 {
      grid-template-columns: repeat(2, 1fr);
    }
    .grid-4 {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .grid-3 {
      grid-template-columns: repeat(3, 1fr);
    }
    .grid-4 {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  /* ------------------------------------------------------------------ */
  /* Cards                                                               */
  /* ------------------------------------------------------------------ */

  .card {
    padding: 1.5rem;
    border-radius: var(--radius);
    border: 1px solid var(--border);
    background: var(--background);
  }

  .card-title {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    letter-spacing: -0.01em;
  }

  .card-body {
    font-size: 0.875rem;
    color: var(--body-fg);
    line-height: 1.65;
  }

  .card-link {
    display: inline-block;
    margin-top: 0.75rem;
    font-size: 0.8125rem;
    font-weight: 500;
    color: var(--accent);
  }

  .card-link:hover {
    text-decoration: underline;
    text-underline-offset: 3px;
  }

  .card-body-muted {
    opacity: 0.7;
  }

  .card-status {
    display: inline-block;
    margin-top: 0.75rem;
    font-size: 0.75rem;
    font-weight: 500;
    letter-spacing: 0.04em;
    text-transform: uppercase;
    color: var(--muted-fg);
    opacity: 0.6;
  }

  /* ------------------------------------------------------------------ */
  /* Audience items                                                      */
  /* ------------------------------------------------------------------ */

  .audience-item {
    padding: 1.25rem 0;
    border-bottom: 1px solid var(--border);
  }

  .audience-item:last-child {
    border-bottom: none;
  }

  @media (min-width: 640px) {
    .audience-item {
      padding: 1.5rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
    }
  }

  /* ------------------------------------------------------------------ */
  /* Footer                                                              */
  /* ------------------------------------------------------------------ */

  .footer {
    border-top: 1px solid var(--border);
    padding: 2rem 0;
  }

  .footer-inner {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    font-size: 0.8125rem;
    color: var(--muted-fg);
  }

  .footer-links {
    display: flex;
    gap: 1.25rem;
  }

  .footer-links a:hover {
    color: var(--foreground);
  }

  @media (min-width: 640px) {
    .footer-inner {
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
    }
  }
</style>
